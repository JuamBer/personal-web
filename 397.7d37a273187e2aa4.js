"use strict";(self.webpackChunkpersonal_web=self.webpackChunkpersonal_web||[]).push([[397],{5397:(Tt,M,s)=>{s.r(M),s.d(M,{SkillsModule:()=>bt});var Y=s(529),r=s(4006),$=s(5180),B=s(2694),N=s(2983),Q=s(9605),O=s(6333),R=s(8553),j=s(3631),C=s(5593),V=s(585),H=s(4247),P=s(2137),T=s(1493),x=s(2210),z=s(7913),E=s(1740),G=s(3054),W=s(2665),X=s(5722),I=s(8177),K=s(1765),y=s(8783),w=s(2453),q=s(2335),h=s(550),_=s(4121),tt=s(4450),J=s(9300),L=s(3628),et=s(5861),m=s(4188),F=s(2651),st=s(2174),lt=s(654),p=s(9370),A=s(1846),u=s(1528),t=s(4650),v=s(2997),f=s(805),b=s(3416),S=s(6895);const at=["createImagenesForm"],it=["updateImagenesForm"];function nt(l,i){1&l&&(t.TgZ(0,"div",16),t._UZ(1,"i",17),t.qZA())}function ot(l,i){if(1&l&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&l){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.name," ")}}function rt(l,i){if(1&l&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&l){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.skillType," ")}}function mt(l,i){if(1&l&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&l){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.percentage," ")}}const U=function(l){return{name:l}};function pt(l,i){if(1&l&&(t._UZ(0,"button",19),t.ALo(1,"translate"),t.ALo(2,"translate")),2&l){const e=t.oxw();t.Q6J("label",t.xi3(1,1,"buttons.create",t.VKq(6,U,t.lcZ(2,4,"tables."+e.names.camelCase.singular+".singular"))))}}function dt(l,i){if(1&l&&(t._UZ(0,"button",19),t.ALo(1,"translate"),t.ALo(2,"translate")),2&l){const e=t.oxw();t.Q6J("label",t.xi3(1,1,"buttons.update",t.VKq(6,U,t.lcZ(2,4,"tables."+e.names.camelCase.singular+".singular"))))}}const ct=function(){return{width:"100%",maxWidth:"40rem"}},ut=function(l,i){return{"ng-invalid":l,"ng-dirty":i}};let D=(()=>{class l{constructor(e,a,n,o,d,g,Z,St,Ct){this.formBuilder=e,this.skillStore=a,this.skillTypeStore=n,this.toastSrv=o,this.translateSrv=d,this.config=g,this.route=Z,this.router=St,this.toastUtils=Ct,this.visible=!1,this.skill$=this.skillStore.select(u.x.getOne),this.loading$=this.skillStore.select(u.x.getLoading),this.message$=this.skillStore.select(u.x.getMessage).pipe((0,J.h)(c=>!!c)),this.names=A.Z,this.skillTypeNames=L.p,this.skillTypes=[],this.errores=[],this.subscriptions=[],d.setDefaultLang("es"),this.route.params.subscribe(c=>{if(this.id=Number(c.id),c.modalMode){switch(c.modalMode){case"VIEW":default:this.show(m.g.VIEW);break;case"UPDATE":this.show(m.g.UPDATE);break;case"CREATE":this.show(m.g.CREATE)}"CREATE"!==c.modalMode&&this.skillStore.dispatch(p.D.loadOne({id:Number(c.id)}))}})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}ngOnInit(){var e=this;this.skillTypeStore.dispatch(st.J.loadAll({payload:null})),this.skillTypeStore.select(lt.b.getAll).subscribe(o=>this.skillTypes=o),this.form=this.formBuilder.group({id:[Date.now()],name:[void 0,[r.kI.required]],percentage:[0,[r.kI.required]],skillType:[void 0,[r.kI.required]]});const a=this.skill$.subscribe(o=>{this.patchValue(o)});this.subscriptions.push(a);const n=this.message$.subscribe(function(){var o=(0,et.Z)(function*(d){const g=yield e.toastUtils.messageHandler(e.names.camelCase.singular,F.C.HIDE_MODAL,d);null!==g&&(e.visible=g)});return function(d){return o.apply(this,arguments)}}());this.subscriptions.push(n)}translate(e){this.translateSrv.use(e),this.translateSrv.get("calendar").subscribe(a=>this.config.setTranslation(a))}send(){if(Object.values(this.form.controls).forEach(e=>{e.markAsDirty()}),!this.form.invalid)switch(this.modalMode){case m.g.CREATE:this.skillStore.dispatch(p.D.create({payload:this.form.value}));break;case m.g.UPDATE:this.skillStore.dispatch(p.D.update({payload:this.form.value}))}}show(e){this.patchValue(null),this.modalMode=e,e==m.g.CREATE&&this.skillStore.dispatch(p.D.unload()),this.visible=!0}onHide(){this.visible=!1,this.errores=[],this.skillStore.dispatch(p.D.unload()),this.form.reset(),this.createImagenesForm?.reset(),this.updateImagenesForm?.reset(),this.router.navigate(["backoffice",A.Z.kebabCase.plural.normal])}patchValue(e){this.form&&this.form.patchValue(e?{id:e.id,name:e.name,percentage:e.percentage,skillType:e.skillType}:{id:Date.now(),name:void 0,percentage:0,skillType:void 0})}get ModalMode(){return m.g}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(r.qu),t.Y36(v.yh),t.Y36(v.yh),t.Y36(f.ez),t.Y36(b.sK),t.Y36(f.b4),t.Y36(h.gz),t.Y36(h.F0),t.Y36(F.z))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-skill-modal"]],viewQuery:function(e,a){if(1&e&&(t.Gf(at,5),t.Gf(it,5)),2&e){let n;t.iGM(n=t.CRH())&&(a.createImagenesForm=n.first),t.iGM(n=t.CRH())&&(a.updateImagenesForm=n.first)}},decls:34,vars:37,consts:[[3,"draggable","resizable","modal","maximizable","visible","visibleChange","onHide"],["class","loading-modal p-component-overlay",4,"ngIf"],[3,"header"],[1,"grid","p-fluid"],[1,"col-12","p-3",3,"formGroup","ngSubmit"],[1,"grid"],[1,"xs:col-12","lg:col-12"],[1,"p-float-label"],["type","text","formControlName","name","pInputText","",1,"p-inputtext-sm",3,"ngClass"],["class","p-error",4,"ngIf"],["formControlName","skillType","optionLabel","name","filterBy","name","appendTo","body",1,"p-inputtext-sm",3,"autoDisplayFirst","options","filter"],[1,"h-full","flex","align-items-center","justify-content-center"],[1,"w-full"],["formControlName","percentage",3,"step"],[1,"button-container","my-3"],["pButton","","type","submit",3,"label",4,"ngIf"],[1,"loading-modal","p-component-overlay"],[1,"pi","pi-spin","pi-spinner"],[1,"p-error"],["pButton","","type","submit",3,"label"]],template:function(e,a){1&e&&(t.TgZ(0,"p-dialog",0),t.NdJ("visibleChange",function(o){return a.visible=o})("onHide",function(){return a.onHide()}),t.YNc(1,nt,2,0,"div",1),t.ALo(2,"async"),t.TgZ(3,"p-tabView")(4,"p-tabPanel",2),t.ALo(5,"translate"),t.TgZ(6,"div",3)(7,"form",4),t.NdJ("ngSubmit",function(){return a.send()}),t.TgZ(8,"div",5)(9,"div",6)(10,"span",7),t._UZ(11,"input",8),t.TgZ(12,"label"),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.YNc(15,ot,2,1,"small",9),t.qZA(),t.TgZ(16,"div",6)(17,"span",7),t._UZ(18,"p-dropdown",10),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.YNc(22,rt,2,1,"small",9),t.qZA(),t.TgZ(23,"div",6)(24,"span",11)(25,"label",12),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"div",12),t._UZ(29,"p-slider",13),t.qZA()(),t.YNc(30,mt,2,1,"small",9),t.qZA()(),t.TgZ(31,"div",14),t.YNc(32,pt,3,8,"button",15),t.YNc(33,dt,3,8,"button",15),t.qZA()()()()()()),2&e&&(t.Akn(t.DdM(33,ct)),t.Q6J("draggable",!1)("resizable",!1)("modal",!0)("maximizable",!0)("visible",a.visible),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,23,a.loading$)),t.xp6(3),t.s9C("header",t.lcZ(5,25,"tabs.info")),t.xp6(3),t.Q6J("formGroup",a.form),t.xp6(4),t.Q6J("ngClass",t.WLB(34,ut,a.form.controls.name.invalid,a.form.controls.name.dirty)),t.xp6(2),t.hij("",t.lcZ(14,27,"columns.name")," *"),t.xp6(2),t.Q6J("ngIf",!a.form.controls.name.valid),t.xp6(3),t.Q6J("autoDisplayFirst",!1)("options",a.skillTypes)("filter",!0),t.xp6(2),t.hij("",t.lcZ(21,29,"tables."+a.skillTypeNames.camelCase.singular+".singular")," *"),t.xp6(2),t.Q6J("ngIf",!a.form.controls.skillType.valid),t.xp6(4),t.hij("",t.lcZ(27,31,"columns.percentage")+" ("+a.form.controls.percentage.value+")"," *"),t.xp6(3),t.Q6J("step",10),t.xp6(1),t.Q6J("ngIf",!a.form.controls.percentage.valid),t.xp6(2),t.Q6J("ngIf",a.modalMode===a.ModalMode.CREATE),t.xp6(1),t.Q6J("ngIf",a.modalMode===a.ModalMode.UPDATE))},dependencies:[S.mk,S.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,C.Hq,T.V,I.iR,x.Lt,E.o,y.xf,y.x4,S.Ov,b.X$]}),l})();var gt=s(5482);let k=(()=>{class l{constructor(e,a,n,o,d,g,Z){this.store=e,this.confirmationSrv=a,this.messageSrv=n,this.toastSrv=o,this.router=d,this.translateSrv=g,this.publicLanguageStore=Z,this.entities$=this.store.select(u.x.getAll),this.loading$=this.store.select(u.x.getLoading),this.count$=this.store.select(u.x.getCount),this.names=A.Z,this.requestFilter=tt.N.defaultRequestFilter,this.loadTable=!1,this.permisos=[]}ngOnInit(){this.publicLanguageStore.select(_.$.getOne).pipe((0,J.h)(e=>null!=e)).subscribe(e=>{this.translateSrv.use(e.acronym)}),this.translateSrv.onLangChange.subscribe(e=>{this.cargarPagina()}),this.cargarPagina(),this.getAll()}getAll(){this.cargarPagina(),this.store.dispatch(p.D.loadAll({payload:this.requestFilter}))}onClick(e){switch(e.type){case"add":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"CREATE"}]);break;case"view":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"VIEW",id:e.data.id}]);break;case"edit":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"UPDATE",id:e.data.id}]);break;case"delete":this.confirmationSrv.confirm({message:this.translateSrv.instant("messages.confirmation.message",{name:this.translateSrv.instant(`tables.${this.names.camelCase.singular}.singular`)}),header:this.translateSrv.instant("messages.confirmation.header"),icon:"pi pi-info-circle",rejectLabel:this.translateSrv.instant("buttons.reject"),acceptLabel:this.translateSrv.instant("buttons.accept"),accept:()=>{this.store.dispatch(p.D.delete({id:e.data.id}))}})}}cargarPagina(){let e=[],a=[];a.push({action:"add",icon:"pi pi-plus",label:this.translateSrv.instant("buttons.new",{name:this.translateSrv.instant("tables.skill.singular")})}),e.push({action:"view",icon:"pi pi-search-plus"}),e.push({action:"edit",icon:"pi pi-pencil"}),e.push({action:"delete",icon:"pi pi-trash"}),this.tableConfig={fieldConfig:[{field:"name",nombre:this.translateSrv.instant("columns.name"),sort:!1,filter:!1,tipo:"TEXTO"},{field:"percentage",nombre:this.translateSrv.instant("columns.percentage"),sort:!1,filter:!1,tipo:"TEXTO"},{field:"skillType",nombre:this.translateSrv.instant(`tables.${L.p.camelCase.singular}.singular`),sort:!1,filter:!1,tipo:"OBJECTO",propiedadParaTipoObjecto:"name"}],optionButtons:e,topButtons:a}}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(v.yh),t.Y36(f.YP),t.Y36(f.ez),t.Y36(f.ez),t.Y36(h.F0),t.Y36(b.sK),t.Y36(v.yh))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-skill"]],viewQuery:function(e,a){if(1&e&&t.Gf(D,5),2&e){let n;t.iGM(n=t.CRH())&&(a.modal=n.first)}},decls:11,vars:15,consts:[[1,"ui-g"],[1,"p-col-12"],[1,"card","card-w-title"],[3,"entities","loading","totalRecords","permisos","tableConfig","requestFilter","requestFilterChange","loadAll","onButtonClick"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"app-tabla-generica",3),t.NdJ("requestFilterChange",function(o){return a.requestFilter=o})("loadAll",function(){return a.getAll()})("onButtonClick",function(o){return a.onClick(o)}),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.qZA()()()(),t._UZ(10,"app-skill-modal")),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,7,"tables."+a.names.camelCase.singular+".plural")," "),t.xp6(2),t.Q6J("entities",t.lcZ(7,9,a.entities$))("loading",t.lcZ(8,11,a.loading$))("totalRecords",t.lcZ(9,13,a.count$))("permisos",a.permisos)("tableConfig",a.tableConfig)("requestFilter",a.requestFilter))},dependencies:[gt.w,D,S.Ov,b.X$]}),l})();const ht=[{path:"",component:k,canActivate:[],pathMatch:"full"},{path:"modal/:modalMode",component:k,canActivate:[]},{path:"modal/:modalMode/:id",component:k,canActivate:[]}];let ft=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[h.Bz.forChild(ht),h.Bz]}),l})();var vt=s(1335);let bt=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[N.S,ft,Y.JF,r.u5,r.UX,$.$,w.EV,C.hJ,W.O,T.S,K.U$,H.d,P.D,j.WN,C.hJ,V._8,T.S,I.JH,x.kW,E.j,z.Iu,G.A,y.LU,X.q4,Q.y,R.I,vt.p,q.I,B.t,O.D]}),l})()}}]);