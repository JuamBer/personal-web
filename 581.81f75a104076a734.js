"use strict";(self.webpackChunkpersonal_web=self.webpackChunkpersonal_web||[]).push([[581],{9581:(yt,I,o)=>{o.r(I),o.d(I,{ProyectsModule:()=>ht});var Q=o(529),r=o(4006),N=o(5180),B=o(2694),D=o(5106),j=o(9605),$=o(6333),G=o(8553),R=o(3631),C=o(5593),S=o(585),O=o(4247),V=o(2137),Z=o(1493),H=o(2210),z=o(7913),U=o(1740),J=o(3054),W=o(2665),X=o(5722),k=o(1765),A=o(8783),K=o(2453),f=o(3626),w=o(4121),q=o(4450),L=o(9300),_=o(5861),c=o(4188),E=o(2651),m=o(6475),T=o(485),p=o(6990),t=o(4650),x=o(2997),h=o(805),v=o(3416),y=o(6895);const tt=["createImagenesForm"],et=["updateImagenesForm"];function at(a,s){1&a&&(t.TgZ(0,"div",18),t._UZ(1,"i",19),t.qZA())}function nt(a,s){if(1&a&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.name," ")}}function ot(a,s){if(1&a&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.date," ")}}function st(a,s){if(1&a&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.links," ")}}function it(a,s){if(1&a&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.description," ")}}function lt(a,s){if(1&a&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.image," ")}}function rt(a,s){if(1&a&&t._UZ(0,"img",21),2&a){const e=t.oxw();t.Q6J("src",e.form.controls.image.value,t.LSH)}}const Y=function(a){return{name:a}};function ct(a,s){if(1&a&&(t._UZ(0,"button",22),t.ALo(1,"translate"),t.ALo(2,"translate")),2&a){const e=t.oxw();t.Q6J("label",t.xi3(1,1,"buttons.create",t.VKq(6,Y,t.lcZ(2,4,"tables."+e.names.camelCase.singular+".singular"))))}}function mt(a,s){if(1&a&&(t._UZ(0,"button",22),t.ALo(1,"translate"),t.ALo(2,"translate")),2&a){const e=t.oxw();t.Q6J("label",t.xi3(1,1,"buttons.update",t.VKq(6,Y,t.lcZ(2,4,"tables."+e.names.camelCase.singular+".singular"))))}}const dt=function(){return{width:"100%",maxWidth:"70rem"}},b=function(a,s){return{"ng-invalid":a,"ng-dirty":s}};let F=(()=>{class a{constructor(e,n,i,l,u,g,P,vt){this.formBuilder=e,this.proyectstore=n,this.toastSrv=i,this.translateSrv=l,this.config=u,this.route=g,this.router=P,this.toastUtils=vt,this.visible=!1,this.proyect$=this.proyectstore.select(p.G.getOne),this.loading$=this.proyectstore.select(p.G.getLoading),this.message$=this.proyectstore.select(p.G.getMessage).pipe((0,L.h)(d=>!!d)),this.names=T.D,this.errores=[],this.subscriptions=[],l.setDefaultLang("es"),this.route.params.subscribe(d=>{if(this.id=Number(d.id),d.modalMode){switch(d.modalMode){case"VIEW":default:this.show(c.g.VIEW);break;case"UPDATE":this.show(c.g.UPDATE);break;case"CREATE":this.show(c.g.CREATE)}"CREATE"!==d.modalMode&&this.proyectstore.dispatch(m.f.loadOne({id:Number(d.id)}))}})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}ngOnInit(){var e=this;this.form=this.formBuilder.group({id:[Date.now()],name:[void 0,[r.kI.required]],description:[void 0,[r.kI.required]],image:[void 0,[r.kI.required]],date:[new Date,[r.kI.required]],links:[void 0,[]]});const n=this.proyect$.subscribe(l=>{this.patchValue(l)});this.subscriptions.push(n);const i=this.message$.subscribe(function(){var l=(0,_.Z)(function*(u){const g=yield e.toastUtils.messageHandler(e.names.camelCase.singular,E.C.HIDE_MODAL,u);null!==g&&(e.visible=g)});return function(u){return l.apply(this,arguments)}}());this.subscriptions.push(i)}translate(e){this.translateSrv.use(e),this.translateSrv.get("calendar").subscribe(n=>this.config.setTranslation(n))}send(){if(Object.values(this.form.controls).forEach(e=>{e.markAsDirty()}),!this.form.invalid)switch(this.modalMode){case c.g.CREATE:this.proyectstore.dispatch(m.f.create({payload:this.form.value}));break;case c.g.UPDATE:this.proyectstore.dispatch(m.f.update({payload:this.form.value}))}}show(e){this.patchValue(null),this.modalMode=e,e==c.g.CREATE&&this.proyectstore.dispatch(m.f.unload()),this.visible=!0}onHide(){this.visible=!1,this.errores=[],this.proyectstore.dispatch(m.f.unload()),this.form.reset(),this.createImagenesForm?.reset(),this.updateImagenesForm?.reset(),this.router.navigate(["backoffice",T.D.kebabCase.plural.normal])}patchValue(e){this.form&&this.form.patchValue(e?{id:e.id,name:e.name,description:e.description,links:e.links,image:e.image,date:e.date}:{id:Date.now(),name:void 0,description:void 0,links:void 0,image:void 0,date:new Date})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(r.qu),t.Y36(x.yh),t.Y36(h.ez),t.Y36(v.sK),t.Y36(h.b4),t.Y36(f.gz),t.Y36(f.F0),t.Y36(E.z))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-proyect-modal"]],viewQuery:function(e,n){if(1&e&&(t.Gf(tt,5),t.Gf(et,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.createImagenesForm=i.first),t.iGM(i=t.CRH())&&(n.updateImagenesForm=i.first)}},decls:49,vars:55,consts:[[3,"draggable","resizable","modal","maximizable","visible","visibleChange","onHide"],["class","loading-modal p-component-overlay",4,"ngIf"],[3,"header"],[1,"grid","p-fluid"],[1,"col-12","p-3",3,"formGroup","ngSubmit"],[1,"grid"],[1,"xs:col-12","lg:col-6"],[1,"p-float-label"],["type","text","formControlName","name","pInputText","",1,"p-inputtext-sm",3,"ngClass"],["class","p-error",4,"ngIf"],["formControlName","date","appendTo","body",1,"p-inputtext-sm",3,"showIcon"],[1,"xs:col-12","lg:col-12"],["formControlName","links","pInputTextarea","",1,"p-inputtext-sm",3,"ngClass"],["formControlName","description","pInputTextarea","",1,"p-inputtext-sm",3,"ngClass"],["type","text","formControlName","image","pInputText","",1,"p-inputtext-sm",3,"ngClass"],["class","w-full","alt","image",3,"src",4,"ngIf"],[1,"button-container","my-3"],["pButton","","type","submit",3,"label",4,"ngIf"],[1,"loading-modal","p-component-overlay"],[1,"pi","pi-spin","pi-spinner"],[1,"p-error"],["alt","image",1,"w-full",3,"src"],["pButton","","type","submit",3,"label"]],template:function(e,n){1&e&&(t.TgZ(0,"p-dialog",0),t.NdJ("visibleChange",function(l){return n.visible=l})("onHide",function(){return n.onHide()}),t.YNc(1,at,2,0,"div",1),t.ALo(2,"async"),t.TgZ(3,"p-tabView")(4,"p-tabPanel",2),t.ALo(5,"translate"),t.TgZ(6,"div",3)(7,"form",4),t.NdJ("ngSubmit",function(){return n.send()}),t.TgZ(8,"div",5)(9,"div",6)(10,"span",7),t._UZ(11,"input",8),t.TgZ(12,"label"),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.YNc(15,nt,2,1,"small",9),t.qZA(),t.TgZ(16,"div",6)(17,"span",7),t._UZ(18,"p-calendar",10),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.YNc(22,ot,2,1,"small",9),t.qZA(),t.TgZ(23,"div",11)(24,"span",7),t._UZ(25,"textarea",12),t.TgZ(26,"label"),t._uU(27),t.ALo(28,"translate"),t.qZA()(),t.YNc(29,st,2,1,"small",9),t.qZA(),t.TgZ(30,"div",11)(31,"span",7),t._UZ(32,"textarea",13),t.TgZ(33,"label"),t._uU(34),t.ALo(35,"translate"),t.qZA()(),t.YNc(36,it,2,1,"small",9),t.qZA(),t.TgZ(37,"div",11)(38,"span",7),t._UZ(39,"input",14),t.TgZ(40,"label"),t._uU(41),t.ALo(42,"translate"),t.qZA()(),t.YNc(43,lt,2,1,"small",9),t.qZA(),t.TgZ(44,"div",11),t.YNc(45,rt,1,1,"img",15),t.qZA()(),t.TgZ(46,"div",16),t.YNc(47,ct,3,8,"button",17),t.YNc(48,mt,3,8,"button",17),t.qZA()()()()()()),2&e&&(t.Akn(t.DdM(42,dt)),t.Q6J("draggable",!1)("resizable",!1)("modal",!0)("maximizable",!0)("visible",n.visible),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,28,n.loading$)),t.xp6(3),t.s9C("header",t.lcZ(5,30,"tabs.info")),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(4),t.Q6J("ngClass",t.WLB(43,b,n.form.controls.name.invalid,n.form.controls.name.dirty)),t.xp6(2),t.hij("",t.lcZ(14,32,"columns.name")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.name.valid),t.xp6(3),t.Q6J("showIcon",!0),t.xp6(2),t.hij("",t.lcZ(21,34,"columns.date")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.date.valid),t.xp6(3),t.Q6J("ngClass",t.WLB(46,b,n.form.controls.links.invalid,n.form.controls.links.dirty)),t.xp6(2),t.hij("",t.lcZ(28,36,"columns.links")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.links.valid),t.xp6(3),t.Q6J("ngClass",t.WLB(49,b,n.form.controls.description.invalid,n.form.controls.description.dirty)),t.xp6(2),t.hij("",t.lcZ(35,38,"columns.description")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.description.valid),t.xp6(3),t.Q6J("ngClass",t.WLB(52,b,n.form.controls.image.invalid,n.form.controls.image.dirty)),t.xp6(2),t.hij("",t.lcZ(42,40,"columns.image")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.image.valid),t.xp6(2),t.Q6J("ngIf",n.form.controls.image.value),t.xp6(2),t.Q6J("ngIf","create"===n.modalMode),t.xp6(1),t.Q6J("ngIf","update"===n.modalMode))},dependencies:[y.mk,y.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,C.Hq,Z.V,S.f,U.o,J.g,A.xf,A.x4,y.Ov,v.X$]}),a})();var pt=o(5482);let M=(()=>{class a{constructor(e,n,i,l,u,g,P){this.store=e,this.confirmationSrv=n,this.messageSrv=i,this.toastSrv=l,this.router=u,this.translateSrv=g,this.publicLanguageStore=P,this.entities$=this.store.select(p.G.getAll),this.loading$=this.store.select(p.G.getLoading),this.count$=this.store.select(p.G.getCount),this.names=T.D,this.requestFilter=q.N.defaultRequestFilter,this.loadTable=!1,this.permisos=[]}ngOnInit(){this.publicLanguageStore.select(w.$.getOne).pipe((0,L.h)(e=>null!=e)).subscribe(e=>{this.translateSrv.use(e.acronym)}),this.translateSrv.onLangChange.subscribe(e=>{this.cargarPagina()}),this.cargarPagina(),this.getAll()}getAll(){this.cargarPagina(),this.store.dispatch(m.f.loadAll({payload:this.requestFilter}))}onClick(e){switch(e.type){case"add":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"CREATE"}]);break;case"view":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"VIEW",id:e.data.id}]);break;case"edit":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"UPDATE",id:e.data.id}]);break;case"delete":this.confirmationSrv.confirm({message:this.translateSrv.instant("messages.confirmation.message",{name:this.translateSrv.instant(`tables.${this.names.camelCase.singular}.singular`)}),header:this.translateSrv.instant("messages.confirmation.header"),icon:"pi pi-info-circle",rejectLabel:this.translateSrv.instant("buttons.reject"),acceptLabel:this.translateSrv.instant("buttons.accept"),accept:()=>{this.store.dispatch(m.f.delete({id:e.data.id}))}})}}cargarPagina(){let e=[],n=[];n.push({action:"add",icon:"pi pi-plus",label:this.translateSrv.instant("buttons.new",{name:this.translateSrv.instant("tables.proyect.singular")})}),e.push({action:"view",icon:"pi pi-search-plus"}),e.push({action:"edit",icon:"pi pi-pencil"}),e.push({action:"delete",icon:"pi pi-trash"}),this.tableConfig={fieldConfig:[{field:"image",nombre:this.translateSrv.instant("columns.image"),sort:!1,filter:!1,tipo:"IMAGENES",propiedadParaTipoImagen:""},{field:"name",nombre:this.translateSrv.instant("columns.name"),sort:!1,filter:!1,tipo:"TEXTO"},{field:"description",nombre:this.translateSrv.instant("columns.description"),sort:!1,filter:!1,tipo:"TEXTO"},{field:"date",nombre:this.translateSrv.instant("columns.date"),sort:!1,filter:!1,tipo:"FECHA"}],optionButtons:e,topButtons:n}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(x.yh),t.Y36(h.YP),t.Y36(h.ez),t.Y36(h.ez),t.Y36(f.F0),t.Y36(v.sK),t.Y36(x.yh))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-proyect"]],viewQuery:function(e,n){if(1&e&&t.Gf(F,5),2&e){let i;t.iGM(i=t.CRH())&&(n.modal=i.first)}},decls:11,vars:15,consts:[[1,"ui-g"],[1,"p-col-12"],[1,"card","card-w-title"],[3,"entities","loading","totalRecords","permisos","tableConfig","requestFilter","requestFilterChange","loadAll","onButtonClick"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"app-tabla-generica",3),t.NdJ("requestFilterChange",function(l){return n.requestFilter=l})("loadAll",function(){return n.getAll()})("onButtonClick",function(l){return n.onClick(l)}),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.qZA()()()(),t._UZ(10,"app-proyect-modal")),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,7,"tables."+n.names.camelCase.singular+".plural")," "),t.xp6(2),t.Q6J("entities",t.lcZ(7,9,n.entities$))("loading",t.lcZ(8,11,n.loading$))("totalRecords",t.lcZ(9,13,n.count$))("permisos",n.permisos)("tableConfig",n.tableConfig)("requestFilter",n.requestFilter))},dependencies:[pt.w,F,y.Ov,v.X$]}),a})();const ut=[{path:"",component:M,canActivate:[],pathMatch:"full"},{path:"modal/:modalMode",component:M,canActivate:[]},{path:"modal/:modalMode/:id",component:M,canActivate:[]}];let gt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[f.Bz.forChild(ut),f.Bz]}),a})();var ft=o(2967);let ht=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[D.S,gt,Q.JF,r.u5,r.UX,N.$,K.EV,C.hJ,W.O,Z.S,k.U$,O.d,V.D,R.WN,C.hJ,S._8,Z.S,H.kW,U.j,z.Iu,J.A,A.LU,X.q4,j.y,G.I,ft.U,B.t,$.D]}),a})()}}]);