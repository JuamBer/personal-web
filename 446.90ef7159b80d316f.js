"use strict";(self.webpackChunkpersonal_web=self.webpackChunkpersonal_web||[]).push([[446],{6446:(B,A,s)=>{s.r(A),s.d(A,{LanguagesModule:()=>ot});var c=s(7204),v=s(2694),Q=s(2983),F=s(9605),$=s(5433),j=s(8553),b=s(550),Z=s(7618),R=s(4121),D=s(4450),E=s(9300),V=s(5861),r=s(4006),u=s(4188),I=s(2651),z=s(3088),m=s(3314),N=s(2607),g=s(660),t=s(4650),C=s(2997),d=s(805),y=s(3416),T=s(6895),P=s(5593),O=s(1740),W=s(7913),U=s(8783),H=s(1493);function G(e,i){1&e&&(t.TgZ(0,"div",16),t._UZ(1,"i",17),t.qZA())}function X(e,i){if(1&e&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.errores.name," ")}}function q(e,i){if(1&e&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.errores.nativeName," ")}}function K(e,i){if(1&e&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.errores.acronym," ")}}function w(e,i){if(1&e&&(t.TgZ(0,"small",18),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.errores.active," ")}}const Y=function(e){return{name:e}};function k(e,i){if(1&e&&(t._UZ(0,"button",19),t.ALo(1,"translate"),t.ALo(2,"translate")),2&e){const a=t.oxw();t.Q6J("label",t.xi3(1,1,"buttons.create",t.VKq(6,Y,t.lcZ(2,4,"tables."+a.names.camelCase.singular+".singular"))))}}function _(e,i){if(1&e&&(t._UZ(0,"button",19),t.ALo(1,"translate"),t.ALo(2,"translate")),2&e){const a=t.oxw();t.Q6J("label",t.xi3(1,1,"buttons.update",t.VKq(6,Y,t.lcZ(2,4,"tables."+a.names.camelCase.singular+".singular"))))}}const tt=function(){return{width:"100%",maxWidth:"40rem"}},L=function(e,i){return{"ng-invalid":e,"ng-dirty":i}};let J=(()=>{class e{constructor(a,n,o,l,p,h,S,x,lt,rt){this.store=a,this.toastSrv=n,this.formBuilder=o,this.router=l,this.accountStore=p,this.translateSrv=h,this.confirmationSrv=S,this.messageSrv=x,this.route=lt,this.toastUtils=rt,this.visible=!1,this.loading$=this.store.select(g.b.getLoading),this.language$=this.store.select(g.b.getOne),this.message$=this.store.select(g.b.getMessage).pipe((0,E.h)(f=>!!f)),this.names=N.z,this.errores=[],this.prepared=!1,this.submitB=!1,this.subscriptions=[],this.route.params.subscribe(f=>{if(f.modalMode){switch(f.modalMode){case"VIEW":default:this.show(u.g.VIEW);break;case"UPDATE":this.show(u.g.UPDATE);break;case"CREATE":this.show(u.g.CREATE)}"CREATE"!==f.modalMode&&this.store.dispatch(m.p.loadOne({id:Number(f.id)}))}})}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}ngOnInit(){var a=this;this.form=this.formBuilder.group({id:[Date.now(),[r.kI.required]],name:[void 0,[r.kI.required]],nativeName:[void 0,[r.kI.required]],acronym:[void 0,[r.kI.required]],active:[!1,[r.kI.required]]});const n=this.language$.subscribe(l=>{this.patchValue(l)});this.subscriptions.push(n);const o=this.message$.subscribe(function(){var l=(0,V.Z)(function*(p){const h=yield a.toastUtils.messageHandler(a.names.camelCase.singular,I.C.HIDE_MODAL,p);null!==h&&(a.visible=h)});return function(p){return l.apply(this,arguments)}}());this.subscriptions.push(o)}translate(a){this.translateSrv.use(a)}show(a){this.patchValue(null),this.modalMode=a,a==u.g.CREATE&&this.store.dispatch(m.p.unload()),this.visible=!0}onHide(){this.visible=!1,this.errores=[],this.store.dispatch(m.p.unload()),this.form.reset(),this.submitB=!1,this.router.navigate(["backoffice",this.names.kebabCase.plural.normal])}patchValue(a){this.form&&this.form.patchValue(a?{id:a.id,name:a.name,nativeName:a.nativeName,acronym:a.acronym,active:a.active}:{id:Date.now(),name:void 0,nativeName:void 0,acronym:void 0,active:!1})}send(){if(this.submitB=!0,Object.values(this.form.controls).forEach(a=>{a.markAsDirty()}),this.form.invalid){this.toastSrv.add({severity:"warn",summary:"Error",detail:this.translateSrv.instant("user.modal.invalid")});let a=this.translateSrv.instant("language.modal.error");for(let n in this.form.controls){let o=this.form.controls[n],l=this.translateSrv.instant("columns."+n);(o.invalid&&""==o.value||o.invalid&&null==o.value)&&(this.errores[n]=a+l)}}else switch(this.modalMode){case u.g.CREATE:this.store.dispatch(m.p.create({payload:this.form.value}));break;case u.g.UPDATE:this.store.dispatch(m.p.update({payload:this.form.value}))}}calculateMaxWidth(a){return z.c.calculateMaxWidth(a)}get ModalMode(){return u.g}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(C.yh),t.Y36(d.ez),t.Y36(r.qu),t.Y36(b.F0),t.Y36(C.yh),t.Y36(y.sK),t.Y36(d.YP),t.Y36(d.ez),t.Y36(b.gz),t.Y36(I.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-language-modal"]],decls:40,vars:49,consts:[[3,"draggable","resizable","modal","maximizable","visible","visibleChange","onHide"],["class","loading-modal p-component-overlay",4,"ngIf"],[3,"header"],[1,"grid","p-fluid"],[1,"col-12","p-3",3,"formGroup","ngSubmit"],[1,"grid"],[1,"xs:col-12","lg:col-6"],[1,"p-float-label"],["type","text","formControlName","name","pInputText","",1,"p-inputtext-sm",3,"ngClass"],["class","p-error",4,"ngIf"],["type","text","formControlName","nativeName","pInputText","",1,"p-inputtext-sm",3,"ngClass"],["type","text","formControlName","acronym","pInputText","",1,"p-inputtext-sm",3,"ngClass"],[1,"flex","align-items-center","justify-content-center","gap-4","h-full"],["formControlName","active",1,"p-inputtext-sm",3,"ngClass"],[1,"button-container","my-3"],["pButton","","type","submit",3,"label",4,"ngIf"],[1,"loading-modal","p-component-overlay"],[1,"pi","pi-spin","pi-spinner"],[1,"p-error"],["pButton","","type","submit",3,"label"]],template:function(a,n){1&a&&(t.TgZ(0,"p-dialog",0),t.NdJ("visibleChange",function(l){return n.visible=l})("onHide",function(){return n.onHide()}),t.YNc(1,G,2,0,"div",1),t.ALo(2,"async"),t.TgZ(3,"p-tabView")(4,"p-tabPanel",2),t.ALo(5,"translate"),t.TgZ(6,"div",3)(7,"form",4),t.NdJ("ngSubmit",function(){return n.send()}),t.TgZ(8,"div",5)(9,"div",6)(10,"span",7),t._UZ(11,"input",8),t.TgZ(12,"label"),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.YNc(15,X,2,1,"small",9),t.qZA(),t.TgZ(16,"div",6)(17,"span",7),t._UZ(18,"input",10),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.YNc(22,q,2,1,"small",9),t.qZA(),t.TgZ(23,"div",6)(24,"span",7),t._UZ(25,"input",11),t.TgZ(26,"label"),t._uU(27),t.ALo(28,"translate"),t.qZA()(),t.YNc(29,K,2,1,"small",9),t.qZA(),t.TgZ(30,"div",6)(31,"span",12)(32,"label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"p-inputSwitch",13),t.qZA(),t.YNc(36,w,2,1,"small",9),t.qZA()(),t.TgZ(37,"div",14),t.YNc(38,k,3,8,"button",15),t.YNc(39,_,3,8,"button",15),t.qZA()()()()()()),2&a&&(t.Akn(t.DdM(36,tt)),t.Q6J("draggable",!1)("resizable",!1)("modal",!0)("maximizable",!0)("visible",n.visible),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,24,n.loading$)),t.xp6(3),t.s9C("header",t.lcZ(5,26,"tabs.info")),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(4),t.Q6J("ngClass",t.WLB(37,L,n.form.controls.name.invalid,n.form.controls.name.dirty)),t.xp6(2),t.hij("",t.lcZ(14,28,"columns.name")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.name.valid),t.xp6(3),t.Q6J("ngClass",t.WLB(40,L,n.form.controls.nativeName.invalid,n.form.controls.nativeName.dirty)),t.xp6(2),t.hij("",t.lcZ(21,30,"columns.nativeName")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.nativeName.valid),t.xp6(3),t.Q6J("ngClass",t.WLB(43,L,n.form.controls.acronym.invalid,n.form.controls.acronym.dirty)),t.xp6(2),t.hij("",t.lcZ(28,32,"columns.acronym")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.acronym.valid),t.xp6(4),t.hij("",t.lcZ(34,34,"columns.active")," *"),t.xp6(2),t.Q6J("ngClass",t.WLB(46,L,n.form.controls.active.invalid,n.form.controls.active.dirty)),t.xp6(1),t.Q6J("ngIf",!n.form.controls.active.valid),t.xp6(2),t.Q6J("ngIf",n.modalMode===n.ModalMode.CREATE),t.xp6(1),t.Q6J("ngIf",n.modalMode===n.ModalMode.UPDATE))},dependencies:[T.mk,T.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,P.Hq,O.o,W.Ql,U.xf,U.x4,H.V,T.Ov,y.X$]}),e})();var at=s(5482);const et=function(){return[]};let M=(()=>{class e{constructor(a,n,o,l,p,h,S,x){this.store=a,this.toastSrv=n,this.router=o,this.accountStore=l,this.translateSrv=p,this.confirmationSrv=h,this.messageSrv=S,this.publicLanguageStore=x,this.entities$=this.store.select(g.b.getAll),this.loading$=this.store.select(g.b.getLoading),this.count$=this.store.select(g.b.getCount),this.names=N.z,this.requestFilter=D.N.defaultRequestFilter,this.loadTable=!1}ngOnInit(){this.publicLanguageStore.select(R.$.getOne).pipe((0,E.h)(a=>null!=a)).subscribe(a=>{this.translateSrv.use(a.acronym)}),this.translateSrv.onLangChange.subscribe(a=>{this.cargarPagina()}),this.cargarPagina(),this.getAll()}cargarPagina(){let a=[],n=[];n.push({action:"add",icon:"pi pi-plus",label:this.translateSrv.instant("buttons.new",{name:this.translateSrv.instant(`tables.${this.names.camelCase.singular}.singular`)})}),a.push({action:"edit",icon:"pi pi-pencil"}),a.push({action:"delete",icon:"pi pi-trash"}),this.tableConfig={fieldConfig:[{field:"acronym",nombre:this.translateSrv.instant("columns.acronym"),sort:!1,filter:!1},{field:"name",nombre:this.translateSrv.instant("columns.name"),sort:!1,filter:!1},{field:"nativeName",nombre:this.translateSrv.instant("columns.nativeName"),sort:!1,filter:!1},{field:"active",nombre:this.translateSrv.instant("columns.active"),sort:!1,filter:!1,tipo:"ACTIVO"}],optionButtons:a,topButtons:n}}getAll(){this.store.dispatch(m.p.loadAll({payload:this.requestFilter}))}onClick(a){switch(a.type){case"add":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"CREATE"}]);break;case"edit":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"UPDATE",id:a.data.id}]);break;case"delete":this.confirmationSrv.confirm({message:this.translateSrv.instant("messages.confirmation.message",{name:this.translateSrv.instant(`tables.${this.names.camelCase.singular}.singular`)}),header:this.translateSrv.instant("messages.confirmation.header"),icon:"pi pi-info-circle",rejectLabel:this.translateSrv.instant("buttons.reject"),acceptLabel:this.translateSrv.instant("buttons.accept"),accept:()=>{this.store.dispatch(m.p.delete({id:a.data.id}))}})}}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(C.yh),t.Y36(d.ez),t.Y36(b.F0),t.Y36(C.yh),t.Y36(y.sK),t.Y36(d.YP),t.Y36(d.ez),t.Y36(C.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-language"]],viewQuery:function(a,n){if(1&a&&t.Gf(J,5),2&a){let o;t.iGM(o=t.CRH())&&(n.modal=o.first)}},decls:11,vars:16,consts:[[1,"ui-g"],[1,"p-col-12"],[1,"card","card-w-title"],[3,"entities","loading","totalRecords","permisos","tableConfig","requestFilter","requestFilterChange","loadAll","onButtonClick"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"app-tabla-generica",3),t.NdJ("requestFilterChange",function(l){return n.requestFilter=l})("loadAll",function(){return n.getAll()})("onButtonClick",function(l){return n.onClick(l)}),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.qZA()()()(),t._UZ(10,"app-language-modal")),2&a&&(t.xp6(4),t.hij(" ",t.lcZ(5,7,"tables."+n.names.camelCase.singular+".plural")," "),t.xp6(2),t.Q6J("entities",t.lcZ(7,9,n.entities$))("loading",t.lcZ(8,11,n.loading$))("totalRecords",t.lcZ(9,13,n.count$))("permisos",t.DdM(15,et))("tableConfig",n.tableConfig)("requestFilter",n.requestFilter))},dependencies:[at.w,J,T.Ov,y.X$]}),e})();const nt=[{path:"",component:M,canActivate:[Z.a],pathMatch:"full"},{path:"modal/:modalMode",component:M,canActivate:[Z.a]},{path:"modal/:modalMode/:id",component:M,canActivate:[Z.a]}];let st=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[b.Bz.forChild(nt),b.Bz]}),e})();var it=s(622);let ot=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[Q.S,st,$.g,v.t,c.X,F.y,it.h,j.I]}),e})()},4188:(B,A,s)=>{s.d(A,{g:()=>c});var c=(()=>{return(v=c||(c={})).CREATE="CREATE",v.UPDATE="UPDATE",v.VIEW="VIEW",c;var v})()}}]);