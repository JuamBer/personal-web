"use strict";(self.webpackChunkpersonal_web=self.webpackChunkpersonal_web||[]).push([[886],{8305:(L,C,s)=>{s.r(C),s.d(C,{SkillTypesModule:()=>ut});var h=s(529),r=s(4006),g=s(5180),l=s(2694),F=s(2983),a=s(9605),o=s(6333),m=s(8553),c=s(3631),u=s(5593),v=s(585),H=s(4247),V=s(2137),O=s(1493),j=s(2210),K=s(7913),B=s(1740),P=s(3054),X=s(2665),G=s(5722),z=s(1765),N=s(8783),w=s(2453),I=s(550),_=s(4121),q=s(4450),Y=s(9300),tt=s(5861),b=s(4188),$=s(2651),T=s(2174),U=s(3628),S=s(654),t=s(4650),D=s(2997),M=s(805),k=s(3416),Z=s(6895);const et=["createImagenesForm"],st=["updateImagenesForm"];function it(i,p){1&i&&(t.TgZ(0,"div",13),t._UZ(1,"i",14),t.qZA())}function nt(i,p){if(1&i&&(t.TgZ(0,"small",15),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.name," ")}}function at(i,p){if(1&i&&(t.TgZ(0,"small",15),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.errores.description," ")}}const x=function(i){return{name:i}};function ot(i,p){if(1&i&&(t._UZ(0,"button",16),t.ALo(1,"translate"),t.ALo(2,"translate")),2&i){const e=t.oxw();t.Q6J("label",t.xi3(1,1,"buttons.create",t.VKq(6,x,t.lcZ(2,4,"tables."+e.names.camelCase.singular+".singular"))))}}function lt(i,p){if(1&i&&(t._UZ(0,"button",16),t.ALo(1,"translate"),t.ALo(2,"translate")),2&i){const e=t.oxw();t.Q6J("label",t.xi3(1,1,"buttons.update",t.VKq(6,x,t.lcZ(2,4,"tables."+e.names.camelCase.singular+".singular"))))}}const rt=function(){return{width:"100%",maxWidth:"40rem"}},Q=function(i,p){return{"ng-invalid":i,"ng-dirty":p}};let W=(()=>{class i{constructor(e,n,d,f,E,y,J,ht){this.formBuilder=e,this.skilltypeStore=n,this.toastSrv=d,this.translateSrv=f,this.config=E,this.route=y,this.router=J,this.toastUtils=ht,this.visible=!1,this.skilltype$=this.skilltypeStore.select(S.b.getOne),this.loading$=this.skilltypeStore.select(S.b.getLoading),this.message$=this.skilltypeStore.select(S.b.getMessage).pipe((0,Y.h)(A=>!!A)),this.names=U.p,this.errores=[],this.subscriptions=[],f.setDefaultLang("es"),this.route.params.subscribe(A=>{if(this.id=Number(A.id),A.modalMode){switch(A.modalMode){case"VIEW":default:this.show(b.g.VIEW);break;case"UPDATE":this.show(b.g.UPDATE);break;case"CREATE":this.show(b.g.CREATE)}"CREATE"!==A.modalMode&&this.skilltypeStore.dispatch(T.J.loadOne({id:Number(A.id)}))}})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}ngOnInit(){var e=this;this.form=this.formBuilder.group({id:[Date.now()],name:[void 0,[r.kI.required]],description:[void 0,[r.kI.required]]});const n=this.skilltype$.subscribe(f=>{this.patchValue(f)});this.subscriptions.push(n);const d=this.message$.subscribe(function(){var f=(0,tt.Z)(function*(E){const y=yield e.toastUtils.messageHandler(e.names.camelCase.singular,$.C.HIDE_MODAL,E);null!==y&&(e.visible=y)});return function(E){return f.apply(this,arguments)}}());this.subscriptions.push(d)}translate(e){this.translateSrv.use(e),this.translateSrv.get("calendar").subscribe(n=>this.config.setTranslation(n))}send(){if(Object.values(this.form.controls).forEach(e=>{e.markAsDirty()}),!this.form.invalid)switch(this.modalMode){case b.g.CREATE:this.skilltypeStore.dispatch(T.J.create({payload:this.form.value}));break;case b.g.UPDATE:this.skilltypeStore.dispatch(T.J.update({payload:this.form.value}))}}show(e){this.patchValue(null),this.modalMode=e,e==b.g.CREATE&&this.skilltypeStore.dispatch(T.J.unload()),this.visible=!0}onHide(){this.visible=!1,this.errores=[],this.skilltypeStore.dispatch(T.J.unload()),this.form.reset(),this.createImagenesForm?.reset(),this.updateImagenesForm?.reset(),this.router.navigate(["backoffice",U.p.kebabCase.plural.normal])}patchValue(e){this.form&&this.form.patchValue(e?{id:e.id,name:e.name,description:e.description}:{id:Date.now(),name:void 0,description:void 0})}get ModalMode(){return b.g}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu),t.Y36(D.yh),t.Y36(M.ez),t.Y36(k.sK),t.Y36(M.b4),t.Y36(I.gz),t.Y36(I.F0),t.Y36($.z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-skill-type-modal"]],viewQuery:function(e,n){if(1&e&&(t.Gf(et,5),t.Gf(st,5)),2&e){let d;t.iGM(d=t.CRH())&&(n.createImagenesForm=d.first),t.iGM(d=t.CRH())&&(n.updateImagenesForm=d.first)}},decls:26,vars:33,consts:[[3,"draggable","resizable","modal","maximizable","visible","visibleChange","onHide"],["class","loading-modal p-component-overlay",4,"ngIf"],[3,"header"],[1,"grid","p-fluid"],[1,"col-12","p-3",3,"formGroup","ngSubmit"],[1,"grid"],[1,"xs:col-12","lg:col-12"],[1,"p-float-label"],["type","text","formControlName","name","pInputText","",1,"p-inputtext-sm",3,"ngClass"],["class","p-error",4,"ngIf"],["formControlName","description","pInputTextarea","",1,"p-inputtext-sm",3,"ngClass"],[1,"button-container","my-3"],["pButton","","type","submit",3,"label",4,"ngIf"],[1,"loading-modal","p-component-overlay"],[1,"pi","pi-spin","pi-spinner"],[1,"p-error"],["pButton","","type","submit",3,"label"]],template:function(e,n){1&e&&(t.TgZ(0,"p-dialog",0),t.NdJ("visibleChange",function(f){return n.visible=f})("onHide",function(){return n.onHide()}),t.YNc(1,it,2,0,"div",1),t.ALo(2,"async"),t.TgZ(3,"p-tabView")(4,"p-tabPanel",2),t.ALo(5,"translate"),t.TgZ(6,"div",3)(7,"form",4),t.NdJ("ngSubmit",function(){return n.send()}),t.TgZ(8,"div",5)(9,"div",6)(10,"span",7),t._UZ(11,"input",8),t.TgZ(12,"label"),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.YNc(15,nt,2,1,"small",9),t.qZA(),t.TgZ(16,"div",6)(17,"span",7),t._UZ(18,"textarea",10),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.YNc(22,at,2,1,"small",9),t.qZA()(),t.TgZ(23,"div",11),t.YNc(24,ot,3,8,"button",12),t.YNc(25,lt,3,8,"button",12),t.qZA()()()()()()),2&e&&(t.Akn(t.DdM(26,rt)),t.Q6J("draggable",!1)("resizable",!1)("modal",!0)("maximizable",!0)("visible",n.visible),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,18,n.loading$)),t.xp6(3),t.s9C("header",t.lcZ(5,20,"tabs.info")),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(4),t.Q6J("ngClass",t.WLB(27,Q,n.form.controls.name.invalid,n.form.controls.name.dirty)),t.xp6(2),t.hij("",t.lcZ(14,22,"columns.name")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.name.valid),t.xp6(3),t.Q6J("ngClass",t.WLB(30,Q,n.form.controls.description.invalid,n.form.controls.description.dirty)),t.xp6(2),t.hij("",t.lcZ(21,24,"columns.description")," *"),t.xp6(2),t.Q6J("ngIf",!n.form.controls.description.valid),t.xp6(2),t.Q6J("ngIf",n.modalMode===n.ModalMode.CREATE),t.xp6(1),t.Q6J("ngIf",n.modalMode===n.ModalMode.UPDATE))},dependencies:[Z.mk,Z.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.Hq,O.V,B.o,P.g,N.xf,N.x4,Z.Ov,k.X$]}),i})();var ct=s(5482);let R=(()=>{class i{constructor(e,n,d,f,E,y,J){this.store=e,this.confirmationSrv=n,this.messageSrv=d,this.toastSrv=f,this.router=E,this.translateSrv=y,this.publicLanguageStore=J,this.entities$=this.store.select(S.b.getAll),this.loading$=this.store.select(S.b.getLoading),this.count$=this.store.select(S.b.getCount),this.names=U.p,this.requestFilter=q.N.defaultRequestFilter,this.loadTable=!1,this.permisos=[]}ngOnInit(){this.publicLanguageStore.select(_.$.getOne).pipe((0,Y.h)(e=>null!=e)).subscribe(e=>{this.translateSrv.use(e.acronym)}),this.translateSrv.onLangChange.subscribe(e=>{this.cargarPagina()}),this.cargarPagina(),this.getAll()}getAll(){this.cargarPagina(),this.store.dispatch(T.J.loadAll({payload:this.requestFilter}))}onClick(e){switch(e.type){case"add":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"CREATE"}]);break;case"view":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"VIEW",id:e.data.id}]);break;case"edit":this.router.navigate(["backoffice",this.names.kebabCase.plural.normal,{modalMode:"UPDATE",id:e.data.id}]);break;case"delete":this.confirmationSrv.confirm({message:this.translateSrv.instant("messages.confirmation.message",{name:this.translateSrv.instant(`tables.${this.names.camelCase.singular}.singular`)}),header:this.translateSrv.instant("messages.confirmation.header"),icon:"pi pi-info-circle",rejectLabel:this.translateSrv.instant("buttons.reject"),acceptLabel:this.translateSrv.instant("buttons.accept"),accept:()=>{this.store.dispatch(T.J.delete({id:e.data.id}))}})}}cargarPagina(){let e=[],n=[];n.push({action:"add",icon:"pi pi-plus",label:this.translateSrv.instant("buttons.new",{name:this.translateSrv.instant(`tables.${this.names.camelCase.singular}.singular`)})}),e.push({action:"view",icon:"pi pi-search-plus"}),e.push({action:"edit",icon:"pi pi-pencil"}),e.push({action:"delete",icon:"pi pi-trash"}),this.tableConfig={fieldConfig:[{field:"name",nombre:this.translateSrv.instant("columns.name"),sort:!1,filter:!1,tipo:"TEXTO"},{field:"description",nombre:this.translateSrv.instant("columns.description"),sort:!1,filter:!1,tipo:"TEXTO"}],optionButtons:e,topButtons:n}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D.yh),t.Y36(M.YP),t.Y36(M.ez),t.Y36(M.ez),t.Y36(I.F0),t.Y36(k.sK),t.Y36(D.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-skill-type"]],viewQuery:function(e,n){if(1&e&&t.Gf(W,5),2&e){let d;t.iGM(d=t.CRH())&&(n.modal=d.first)}},decls:11,vars:15,consts:[[1,"ui-g"],[1,"p-col-12"],[1,"card","card-w-title"],[3,"entities","loading","totalRecords","permisos","tableConfig","requestFilter","requestFilterChange","loadAll","onButtonClick"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"app-tabla-generica",3),t.NdJ("requestFilterChange",function(f){return n.requestFilter=f})("loadAll",function(){return n.getAll()})("onButtonClick",function(f){return n.onClick(f)}),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.qZA()()()(),t._UZ(10,"app-skill-type-modal")),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,7,"tables."+n.names.camelCase.singular+".plural")," "),t.xp6(2),t.Q6J("entities",t.lcZ(7,9,n.entities$))("loading",t.lcZ(8,11,n.loading$))("totalRecords",t.lcZ(9,13,n.count$))("permisos",n.permisos)("tableConfig",n.tableConfig)("requestFilter",n.requestFilter))},dependencies:[ct.w,W,Z.Ov,k.X$]}),i})();const mt=[{path:"",component:R,canActivate:[],pathMatch:"full"},{path:"modal/:modalMode",component:R,canActivate:[]},{path:"modal/:modalMode/:id",component:R,canActivate:[]}];let dt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[I.Bz.forChild(mt),I.Bz]}),i})();var pt=s(2335);let ut=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[F.S,dt,h.JF,r.u5,r.UX,g.$,w.EV,u.hJ,X.O,O.S,z.U$,H.d,V.D,c.WN,u.hJ,v._8,O.S,j.kW,B.j,K.Iu,P.A,N.LU,G.q4,a.y,m.I,pt.I,l.t,o.D]}),i})()},8426:(L,C,s)=>{s.d(C,{E7:()=>h,rE:()=>g,vA:()=>r});var h=(()=>{return(l=h||(h={})).TEXT="TEXT",l.NUMBER="NUMBER",l.DATE="DATE",l.TIME="TIME",l.DATETIME="DATETIME",l.CURRENCY="CURRENCY",l.OBJECT="OBJECT",l.ARRAY="ARRAY",l.BOOLEAN="BOOLEAN",l.IMAGE="IMAGE",h;var l})(),r=(()=>{return(l=r||(r={})).START_WITH="START_WITH",l.ENDS_WITH="ENDS_WITH",l.CONTAINS="CONTAINS",l.NOT_CONTAINS="NOT_CONTAINS",l.EQUAL="EQUAL",l.NOT_EQUAL="NOT_EQUAL",r;var l})(),g=(()=>{return(l=g||(g={})).CREATE="CREATE",l.UPDATE="UPDATE",l.DELETE="DELETE",l.VIEW="VIEW",l.DUPLICATE="DUPLICATE",g;var l})()},62:(L,C,s)=>{s.d(C,{v:()=>l});var h=s(5861),r=s(8426),g=s(4642);class l{constructor(a,o,m="*",c="*",u="name"){this.supabase=a,this.table=o,this.getAllSelection=m,this.getOneSelection=c,this.titleSelection=u}getAll(a){var o=this;return(0,h.Z)(function*(){let m=o.supabase.from(o.table).select(o.getAllSelection);a&&"sortField"in a&&l.applyFiltersAndSorting(m,a);const{data:c,error:u}=yield m;return u||(0,g.iP)(c)})()}getTitle(a){var o=this;return(0,h.Z)(function*(){const{data:m,error:c}=yield o.supabase.from(o.table).select(o.titleSelection).match({id:a}).single();return c||(0,g.iP)(m)})()}getOne(a){var o=this;return(0,h.Z)(function*(){const{data:m,error:c}=yield o.supabase.from(o.table).select(o.getOneSelection).match({id:a}).single();return c||(0,g.iP)(m)})()}create(a){var o=this;return(0,h.Z)(function*(){const{data:m,error:c}=yield o.supabase.from(o.table).insert([(0,g.PI)((0,g.KU)(a))]);return c||m})()}update(a){var o=this;return(0,h.Z)(function*(){const{data:m,error:c}=yield o.supabase.from(o.table).update((0,g.PI)((0,g.KU)(a))).match({id:a.id});return c||m})()}delete(a){var o=this;return(0,h.Z)(function*(){const{data:m,error:c}=yield o.supabase.from(o.table).delete().match({id:a});return c||m})()}count(){var a=this;return(0,h.Z)(function*(){const{count:o,error:m}=yield a.supabase.from(a.table).select("*",{count:"exact",head:!0});return m||o})()}static applyFiltersAndSorting(a,o){o.sortField&&o.sortOrder&&(a=a.order(o.sortField,{ascending:1===o.sortOrder})),o.filters&&Object.entries(o.filters).forEach(([m,c])=>{const u=m,v=c.value.value;if(v)switch(c.value.filterType){case r.vA.START_WITH:a=a.ilike(u,`${v}%`);break;case r.vA.ENDS_WITH:a=a.ilike(u,`%${v}`);break;case r.vA.EQUAL:a=a.eq(u,v);break;case r.vA.NOT_EQUAL:a=a.not(u,"eq",v);break;case r.vA.CONTAINS:a=a.ilike(u,`%${v}%`);break;case r.vA.NOT_CONTAINS:a=a.not(u,"like",`%${v}%`);break;default:a=a.ilike(u,`%${v}%`)}}),Number.isInteger(o.first)&&Number.isInteger(o.rows)&&(a=a.range(o.first,o.first+o.rows-1))}}}}]);